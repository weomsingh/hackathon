:root {
  --bg-primary: #0b0f14;
  --bg-surface: #11161d;
  --bg-card: #141b22;
  --text-primary: #e6edf3;
  --text-secondary: #8b949e;
  --accent-amber: #f0a500;
  --accent-amber-soft: rgba(240, 165, 0, 0.14);
  --accent-teal: #2dd4bf;
  --accent-red: #ff4757;
  --accent-orange: #ff6b35;
  --border-subtle: #30363d;
}

* { box-sizing: border-box; transition: all 0.2s ease; }

body {
  margin: 0;
  background: radial-gradient(circle at top left, #101722, var(--bg-primary));
  color: var(--text-primary);
  font-family: 'DM Sans', sans-serif;
}

::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg-primary); }
::-webkit-scrollbar-thumb { background: var(--border-subtle); border-radius: 3px; }

.layout { max-width: 1280px; margin: 0 auto; padding: 20px; }
.topbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px; }
.topbar h1 { margin: 0; font-family: 'Fraunces', serif; }
.topbar p { margin: 4px 0 0; color: var(--text-secondary); }

.card {
  background: var(--bg-card);
  border: 1px solid var(--border-subtle);
  border-radius: 12px;
  padding: 14px;
}

.upload-card { margin-bottom: 16px; }
.drop-zone {
  margin-top: 12px;
  border: 2px dashed var(--border-subtle);
  border-radius: 12px;
  padding: 28px;
  text-align: center;
  cursor: pointer;
}
.drop-zone.drag-over {
  background: var(--accent-amber-soft);
  border-color: var(--accent-amber);
  box-shadow: 0 0 30px var(--accent-amber-soft);
}

.file-info { display: none; margin-top: 10px; color: var(--accent-teal); }

.btn { border: 1px solid transparent; border-radius: 10px; padding: 10px 14px; cursor: pointer; font-family: 'DM Sans', sans-serif; }
.btn-primary { background: var(--accent-amber); color: #1a1200; font-weight: 700; }
.btn-outline-amber { background: transparent; border-color: var(--accent-amber); color: var(--accent-amber); }
.btn-outline-teal { background: transparent; border-color: var(--accent-teal); color: var(--accent-teal); }
.link-btn { color: var(--accent-amber); text-decoration: none; border: 1px solid var(--border-subtle); border-radius: 999px; padding: 6px 12px; }

.muted { color: var(--text-secondary); }
.small { font-size: 12px; }

.error-box {
  display: none;
  margin-top: 12px;
  background: #1c1510;
  border-left: 4px solid var(--accent-orange);
  padding: 10px;
  border-radius: 8px;
}

.empty-state { text-align: center; margin-bottom: 16px; }
.big-icon { font-size: 42px; }
.empty-title { font-family: 'Fraunces', serif; font-style: italic; font-size: 22px; margin: 8px 0; }

.summary-grid { display: grid; gap: 12px; grid-template-columns: repeat(4, minmax(0, 1fr)); margin-bottom: 14px; }
.summary-card h4 { margin: 0; color: var(--text-secondary); font-size: 12px; text-transform: uppercase; }
.summary-card .value { margin-top: 8px; font-size: 24px; font-weight: 700; }

.graph-and-side { display: grid; grid-template-columns: 1fr 320px; gap: 12px; margin-bottom: 14px; }
#graphContainer { width: 100%; height: 600px; border: 1px solid var(--border-subtle); border-radius: 10px; margin: 10px 0; overflow: hidden; }
.card-head { display: flex; flex-direction: column; gap: 4px; }
.card-head.between { flex-direction: row; justify-content: space-between; align-items: center; }
.card-head h3 { margin: 0; font-family: 'Fraunces', serif; font-size: 24px; }

.graph-controls { display: flex; flex-wrap: wrap; gap: 8px; }
.pill-btn {
  background: transparent;
  border: 1px solid var(--border-subtle);
  color: var(--text-primary);
  border-radius: 999px;
  padding: 6px 12px;
  cursor: pointer;
}
.pill-btn.active { border-color: var(--accent-amber); color: var(--accent-amber); }

.node-tooltip {
  position: absolute;
  z-index: 20;
  pointer-events: none;
  background: #0d1117;
  border: 1px solid var(--accent-amber);
  border-radius: 10px;
  padding: 10px;
  width: 280px;
  font-size: 14px;
  font-family: 'DM Sans', sans-serif;
}
.tooltip-id { font-family: 'DM Mono', monospace; font-size: 16px; margin-bottom: 6px; color: var(--accent-amber); }
.tooltip-risk, .tooltip-ring, .tooltip-patterns, .tooltip-stats { margin-top: 4px; }

.node-detail-panel {
  position: fixed;
  top: 0;
  right: -340px;
  width: 320px;
  height: 100vh;
  background: var(--bg-surface);
  border-left: 1px solid var(--border-subtle);
  padding: 16px;
  z-index: 30;
  overflow-y: auto;
}
.node-detail-panel.open { right: 0; }
.panel-close { position: absolute; right: 10px; top: 10px; background: transparent; color: var(--text-primary); border: none; font-size: 26px; cursor: pointer; }
.detail-id { font-family: 'DM Mono', monospace; font-size: 22px; margin-top: 14px; }
.badge { display: inline-block; border-radius: 999px; padding: 2px 8px; font-size: 12px; }
.badge-high { background: rgba(255, 71, 87, 0.15); color: var(--accent-red); }
.badge-mid { background: rgba(255, 107, 53, 0.15); color: var(--accent-orange); }
.badge-low { background: rgba(240, 165, 0, 0.15); color: var(--accent-amber); }

.score-track { height: 10px; border-radius: 999px; background: #0d1117; border: 1px solid var(--border-subtle); margin: 8px 0; overflow: hidden; }
.score-bar { height: 100%; width: 0; background: linear-gradient(90deg, #2dd4bf, #f0a500, #ff6b35, #ff4757); animation: fill-bar 0.8s ease-out forwards; }
@keyframes fill-bar {
  from { width: 0; }
  to { width: var(--score-pct); }
}

.table-card { margin-bottom: 14px; }
table { width: 100%; border-collapse: collapse; background: var(--bg-card); border-radius: 12px; overflow: hidden; }
thead tr { background: var(--bg-surface); color: var(--text-secondary); text-transform: uppercase; font-size: 11px; letter-spacing: 0.06em; }
th, td { padding: 10px; text-align: left; border-bottom: 1px solid rgba(48, 54, 61, 0.5); }
tr:nth-child(even) td { background: rgba(255, 255, 255, 0.01); }
tr:hover { border-left: 3px solid var(--accent-amber); background: var(--accent-amber-soft); }

.mono { font-family: 'DM Mono', monospace; }
.ring-id { color: var(--accent-amber); }
.member-count { color: var(--accent-teal); font-weight: 700; }
.pill-red { background: rgba(255, 71, 87, 0.18); color: var(--accent-red); }
.pill-orange { background: rgba(255, 107, 53, 0.18); color: var(--accent-orange); }
.pill-yellow { background: rgba(240, 165, 0, 0.18); color: var(--accent-amber); }
.pill-mixed { background: linear-gradient(90deg, rgba(240,165,0,.2), rgba(255,71,87,.2)); color: #ffca6b; }
.inline-pill { border-radius: 999px; padding: 2px 8px; font-size: 12px; display: inline-block; margin-right: 4px; }
.link-inline { color: var(--accent-amber); cursor: pointer; text-decoration: underline; }

.table-tools { margin: 8px 0; }
.table-tools input {
  width: 100%;
  border: 1px solid var(--border-subtle);
  background: #0d1117;
  color: var(--text-primary);
  border-radius: 8px;
  padding: 9px;
}
.pagination { margin-top: 10px; display: flex; gap: 10px; justify-content: flex-end; align-items: center; }

.export-actions { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px; }
.json-preview {
  background: #0d1117;
  border: 1px solid var(--border-subtle);
  border-radius: 10px;
  padding: 12px;
  max-height: 400px;
  overflow: auto;
  font-family: 'DM Mono', monospace;
  white-space: pre-wrap;
}
.json-key { color: var(--accent-amber); }
.json-string { color: var(--accent-teal); }
.json-number { color: #f7f7f7; }

.results-section { animation: slide-up 0.5s ease-out; }
@keyframes slide-up {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fraud-pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.3); opacity: 0.8; }
}

@media (max-width: 980px) {
  .summary-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  .graph-and-side { grid-template-columns: 1fr; }
  .node-detail-panel { width: 100%; right: -100%; }
}
